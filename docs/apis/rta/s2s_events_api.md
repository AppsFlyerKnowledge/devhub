---
title: "Server to server events - overview"
slug: "server-to-server-events-overview"
category: 6575d5361ad9bf00553500b2
hidden: false
order: 0
---


The AppsFlyer platform attributes and records mobile app events sent by the AppsFlyer SDK and by S2S APIs. 

## Prerequisites

S2S key. Learn [how to obtain the S2S key](https://support.appsflyer.com/hc/en-us/articles/360004562377-Managing-API-and-Server-to-server-S2S-tokens).

## Endpoint

```http
POST https://api3.appsflyer.com/inappevent/{app_id}
```

## Path parameters

| Parameter |  Type | Description | Example |
| --- | --- | --- | --- |
| app_id | string | The app identifier used in the AppsFlyer dashboard. 
iOS apps: Ensure to prefix with id. Failure to do so results in a valid 200 OK return code; without recording the event.
Windows: Get the app ID from the Microsoft App Store. | id123456789 |

## Android body parameters

| Name | Type | Description | Example |
| --- | --- | --- | --- |
| advertising_id | string | Where available populate with the device GAID (advertising ID) | 9c9a82fb-d5de-4cd1-90c3-527441c11828 |
| oaid | string | An identifier for advertisers on Android devices that is used for tracking and serving ads without using the Google Advertising ID (GAID) | 1fe9a970-efbb-29e0-0bdd-f5dbbf751ab5 |
| amazon_aid | string | An advertising identifier provided by Amazon for apps on Amazon devices |  |
| imei | string | https://en.wikipedia.org/wiki/International_Mobile_Equipment_Identity: A unique identifier for mobile phones, typically found by dialing *#06#. | AA-BBBBBB-CCCCCC-D |
| appsflyer_id* | string | A unique identifier, generated by AppsFlyer, when the app launches for the first time. | 1234567890123-1234567 |
| customer_user_id | string | https://support.appsflyer.com/hc/en-us/articles/207032016, a unique user identifier set by the app owner. | customer_user_id |
| ip | string | The mobile device's IP address during the event occurrence.  | 192.0.2.1 |
| eventName* | string | Specify the event name. Ensure that the event names are aligned with the marketer's requirements. |  |
| eventValue* | string | Event values must be sent without additional symbols or formatting.

For af_revenue a decimal point can be used. Negative values should be preceded by a minus sign.

https://support.appsflyer.com/hc/en-us/articles/360002254918#paypurchase-2 

If you send an event without a value then send: "eventValue":"" | '{ "af_revenue": "6", "af_content_type": "wallets", "af_content_id": "15854", "your_custom_attribute" :"456.123" }' |
| app_version_name | string |  | my_app_version |
| app_store | string | Equivalent to AF_STORE in Android apps. The store from which the app was downloaded. | my_android_store_is_best |
| eventTime | string | The time the event occurred using UTC timezone. 
Default: If no eventTime is sent, the time is set to the HTTP message arrival time.
Format: string yyyy-mm-dd hh:mm:ss.sss the time needs to be in UTC timezone.

To learn how events are timestamped after arriving at AppsFlyer based on the eventTime value see https://support.appsflyer.com/hc/en-us/articles/207034486-Server-to-server-events-API-for-mobile-S2S-mobile-#time-stamping-s2s-events. | "2019-05-15 12:17:01.123" |
| eventCurrency | string |  | USD |
| bundleIdentifier | string | A unique app identifier. In raw data reports, the parameter populates Bundle ID.
Best practice - Always populate this parameter. Many ad networks require it for campaign optimization. | com.myapp |
| sharing_filter | array | The sharing filter blocks the sharing of S2S events via postbacks/API with integrated partners and other third-party integrations. 

Use the filter to fulfill regulatory requirements like GDPR and CCPA, to comply with user opt-out mechanisms, and for other business logic reasons.

The sharing_filter has the following options:

all: All partners are blocked. Don't share the event with anyone. Example: "sharing_filter": "all"
List of partner ids in an array: To find out the required partner IDs:

1. Run the https://dev.appsflyer.com/hc/reference/get_v1-integrations for a list of all active integrations
2. Use the media_source_name values from the https://dev.appsflyer.com/hc/reference/get_v1-integrations as input values to the method partners array.

Exceptions:
For Apple Search Ads use Apple Search Ads (and not iossearchads_int).
For Twitter, use twitter (and not twitter_int) | ["googleadwords_int", "adcolony_int"] |
| custom_dimension | string | Reserved for AppsFlyer future use |  |
| app_type | string | If the user event takes place in an app_clip, send the parameter. In all other cases don't send the parameter. | app_clip |
| custom_data | string | Send custom data to the AppsFlyer platform. Similar to sending data from the SDK using setAdditionalData In raw data: populates custom_data field. | '{"key_group" : { "key_a1" : "value a1", "key_a2" : "value a2" }, "key_b" : "value b"}' |
| os | string | The device operating system version. 

To enable correct data processing you must send this parameter.  | "14.5.1" |
| aie | boolean | Use this flag to indicate if the user opted out of sharing their advertiser ID.

Use this field for devices running Android (all versions), or iOS versions before 14.
For iOS 14.5+, use the att parameter.

Populate this field as follows:
true: if the user agreed to share the advertiser ID.
false: if the user enabled Limited Ad Tracking (LAT). | true |
| consent_data | object | The consent data sent with the event: 
- https://github.com/InteractiveAdvertisingBureau/GDPR-Transparency-and-Consent-Framework/blob/master/TCFv2/IAB%20Tech%20Lab%20-%20CMP%20API%20v2.md#in-app-details or
- Manual object |  "consent_data": {
     "manual": {
         "gdpr_applies": true,
         "ad_user_data_enabled": false,
         "ad_personalization_enabled": true
       }
} |

## iOS body parameters

| Name | Type | Description | Example |
| --- | --- | --- | --- |
| idfa | string | Where available populate with the device IDFA | 9876F1SS-2983-3855-27RR-2R626772VFNB |
| idfv | string | Where available populate with the device IDFV | 95C9BD22-4A4C-41C8-9548-ED07C5C8C145 |
| appsflyer_id* | string | A unique identifier, generated by AppsFlyer, when the app launches for the first time. | 1234567890123-1234567 |
| customer_user_id  | string | https://support.appsflyer.com/hc/en-us/articles/207032016, a unique user identifier set by the app owner. | customer_user_id |
| att | integer | iOS https://developer.apple.com/documentation/apptrackingtransparency/attrackingmanager/authorizationstatus/.

If the device OS version is iOS 14 or later, populate att with https://developer.apple.com/documentation/apptrackingtransparency/attrackingmanager/authorizationstatus/.

The iOS values for ATTrackingManager are:
0: Not determined
1: Restricted
2: Denied
3: Authorize

We recommend that you populate att with the ATTrackingManager value as it impacts which identifiers are shared with partners in accordance with your https://support.appsflyer.com/hc/en-us/articles/360018515798. | 3 |
| ip | string | The mobile device's IP address during the event occurrence.

If sent, the IP address is used to populate geo fields.
If not sent, AppsFlyer populates the geo fields using the values from the install attribution event. The IP address isn't populated. | 192.0.2.1 |
| eventName* | string | Specify the event name. Ensure that the event names are aligned with the marketer's requirements. | score_share |
| eventValue* | string | Event values must be sent without additional symbols or formatting.

For af_revenue a decimal point can be used. Negative values should be preceded by a minus sign.

https://support.appsflyer.com/hc/en-us/articles/360002254918#paypurchase-2 

If you send an event without a value then send: "eventValue":""
 | { "af_revenue": "6", "af_content_type": "wallets", "af_content_id": "15854", "your_custom_attribute" :"456.123" } |
| app_version_name | string |  | my_app_version |
| app_store | string | Equivalent to AF_STORE in Android apps. The store from which the app was downloaded. | 
my_ios_store_is_best |
| eventTime | string | The time the event occurred using UTC timezone. 
Default: If no eventTime is sent, the time is set to the HTTP message arrival time.
Format: string yyyy-mm-dd hh:mm:ss.sss the time needs to be in UTC timezone.

To learn how events are timestamped after arriving at AppsFlyer based on the eventTime value see https://support.appsflyer.com/hc/en-us/articles/207034486-Server-to-server-events-API-for-mobile-S2S-mobile-#time-stamping-s2s-events. | "2019-05-15 12:17:01.123" |
| eventCurrency | string |  | NZD |
| bundleIdentifier | string | A unique app identifier. In raw data reports, the parameter populates Bundle ID.
Best practice - Always populate this parameter. Many ad networks require it for campaign optimization. | com.myapp |
| sharing_filter | array | The sharing filter blocks the sharing of S2S events via postbacks/API with integrated partners and other third-party integrations. 

Use the filter to fulfill regulatory requirements like GDPR and CCPA, to comply with user opt-out mechanisms, and for other business logic reasons.

The sharing_filter has the following options:

all: All partners are blocked. Don't share the event with anyone. Example: "sharing_filter": "all"
List of partner ids in an array: To find out the required partner IDs:

1. Run the https://dev.appsflyer.com/hc/reference/get_v1-integrations for a list of all active integrations
2. Use the media_source_name values from the https://dev.appsflyer.com/hc/reference/get_v1-integrations as input values to the method partners array.

Exceptions:
For Apple Search Ads use Apple Search Ads (and not iossearchads_int).
For Twitter, use twitter (and not twitter_int) | ["googleadwords_int", "adcolony_int"] |
| custom_dimension | string | Reserved for AppsFlyer future use | string |
| app_type | string | If the user event takes place in an app_clip, send the parameter. In all other cases don't send the parameter. | app_clip |
| custom_data | string | Send custom data to the AppsFlyer platform. Similar to sending data from the SDK using setAdditionalData In raw data: populates custom_data field. | {"key_group" : { "key_a1" : "value a1", "key_a2" : "value a2" }, "key_b" : "value b"} |
| os | string | The device operating system version. 

To enable correct data processing you must send this parameter. 

Starting July 1, 2021, for iOS apps, if you don't send this parameter we regard the data as having come from a device running iOS 14.5. | "14.5.1" |
| aie | boolean | Use this flag to indicate if the user opted out of sharing their advertiser ID.

Use this field for devices running Android (all versions), or iOS versions before 14.
For iOS 14.5+, use the att parameter.

Populate this field as follows:
true: if the user agreed to share the advertiser ID.
false: if the user enabled Limited Ad Tracking (LAT). | true |
| consent_data | object | The consent data sent with the event: 
- https://github.com/InteractiveAdvertisingBureau/GDPR-Transparency-and-Consent-Framework/blob/master/TCFv2/IAB%20Tech%20Lab%20-%20CMP%20API%20v2.md#in-app-details or
- Manual object | "consent_data": {
     "manual": {
         "gdpr_applies": true,
         "ad_user_data_enabled": false,
         "ad_personalization_enabled": true
       }
} |

## Example request

```bash
curl --request POST 
     --url https://api3.appsflyer.com/inappevent/app_id 
     --header 'accept: application/json' 
     --header 'content-type: application/json' 
     --data '
{
  "advertising_id": "9c9a82fb-d5de-4cd1-90c3-527441c11828",
  "oaid": "1fe9a970-efbb-29e0-0bdd-f5dbbf751ab5",
  "amazon_aid": "string",
  "imei": "AA-BBBBBB-CCCCCC-D",
  "appsflyer_id": "1234567890123-1234567",
  "customer_user_id": "customer_user_id",
  "ip": "192.0.2.1",
  "eventName": "string",
  "eventValue": "{ \"af_revenue\": \"6\", \"af_content_type\": \"wallets\", \"af_content_id\": \"15854\", \"your_custom_attribute\" :\"456.123\" }",
  "app_version_name": "my_app_version",
  "app_store": "my_android_store_is_best",
  "eventTime": "2019-05-15 12:17:01.123",
  "eventCurrency": "NZD",
  "bundleIdentifier": "com.myapp",
  "sharing_filter": [
    "string"
  ],
  "custom_dimension": "string",
  "app_type": "",
  "custom_data": "{\"key_group\" : { \"key_a1\" : \"value a1\", \"key_a2\" : \"value a2\" }, \"key_b\" : \"value b\"}",
  "os": "14.5.1",
  "aie": true,
  "consent_data": {
    "tcf": {
      "policy_version": 0,
      "gdpr_applies": -1,
      "cmp_sdk_id": 0,
      "cmp_sdk_version": 0,
      "tcstring": "string"
    }
  }
}
'
```